(this["webpackJsonpandys-fee-redeemer"]=this["webpackJsonpandys-fee-redeemer"]||[]).push([[0],{213:function(e,n,t){},214:function(e,n){},215:function(e,n){},244:function(e,n){},245:function(e,n){},275:function(e,n,t){},276:function(e,n,t){"use strict";t.r(n);var c=t(1),a=t.n(c),r=t(30),o=t.n(r),i=(t(213),t(85)),s=t(5),u=t(326),l=t(327),b=t(328),d=t(318),p=t(319),j=t(329),x=t(323),f=t(122),O=t(195),h=t(320),m=t(99),v=t(189),y=t(84),g=t(40),k=t(96),w=t(9),S=t.n(w),C=t(315),T=t(309),A=t(324),E=t(97),P=t(322),R=t(178),F=t(13),K=t(3),L=t(2),M=t.n(L),z=t(126);function B(e,n){return I.apply(this,arguments)}function I(){return(I=Object(K.a)(M.a.mark((function e(n,t){var c,a,r,o,i,u,l,b,d,p;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getTokenAccountsByOwner(t,{programId:z.a});case 2:c=e.sent,console.log(c),a=[],r=0,o=Object(F.a)(c.value),e.prev=7,o.s();case 9:if((i=o.n()).done){e.next=33;break}if(u=i.value,console.log(u.pubkey.toBase58()),l=!1,b=64,!u.account.data.readBigUInt64LE){e.next=20;break}d=u.account.data.readBigUInt64LE(b),console.log("amount: "+d),l=0n===d,e.next=30;break;case 20:l=!0,p=0;case 22:if(!(p<8)){e.next=29;break}if(0===u.account.data[b+p]){e.next=26;break}return l=!1,e.abrupt("break",29);case 26:p++,e.next=22;break;case 29:console.log("account empty: "+l);case 30:l&&(console.log("account empty!"),a.push(u.pubkey),r+=u.account.lamports);case 31:e.next=9;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(7),o.e(e.t0);case 38:return e.prev=38,o.f(),e.finish(38);case 41:return e.abrupt("return",{publicKeys:a,size:a.length,amount:r/s.LAMPORTS_PER_SOL});case 42:case"end":return e.stop()}}),e,null,[[7,35,38,41]])})))).apply(this,arguments)}function _(e,n){return W.apply(this,arguments)}function W(){return(W=Object(K.a)(M.a.mark((function e(n,t){var c,a,r,o,i;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:c=t.map((function(e){return z.b.createCloseAccountInstruction(z.a,e,n,n,[])})),a=[];case 2:if(!(c.length>0)){e.next=18;break}r=new s.Transaction,o=0;case 5:if(!(o<20)){e.next=15;break}if(!(i=c.pop())){e.next=11;break}r.add(i),e.next=12;break;case 11:return e.abrupt("break",15);case 12:o++,e.next=5;break;case 15:a.push(r),e.next=2;break;case 18:return e.abrupt("return",a);case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var D,U,H,J=t(313),N=t(310),Y=t(17),q=function(e){var n=e.emptyAccounts;return Object(Y.jsx)(J.a,{container:!0,direction:"row",justifyContent:"center",wrap:"nowrap",children:Object(Y.jsx)(J.a,{container:!0,direction:"row",wrap:"nowrap",children:n&&Object(Y.jsxs)(J.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(Y.jsxs)(J.a,{container:!0,direction:"column",children:[Object(Y.jsx)(N.a,{variant:"body2",color:"textSecondary",children:"Empty Accounts"}),Object(Y.jsx)(N.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:"".concat(null===n||void 0===n?void 0:n.size)})]}),Object(Y.jsxs)(J.a,{container:!0,direction:"column",children:[Object(Y.jsx)(N.a,{variant:"body2",color:"textSecondary",children:"You can redeem"}),Object(Y.jsx)(N.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:G(null===n||void 0===n?void 0:n.amount)})]}),Object(Y.jsxs)(J.a,{container:!0,direction:"column",children:[Object(Y.jsx)(N.a,{variant:"body2",color:"textSecondary",children:"Total Redemmed"}),Object(Y.jsx)(N.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:G(42)})]})]})})})},G=function(e){return"\u25ce ".concat(e.toFixed(3))},Q=t(307),V=t(314),X=Object(E.a)(Q.a)(D||(D=Object(k.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),Z=function(e){var n=e.onClick,t=e.emptyAccounts,a=Object(c.useState)(!1),r=Object(g.a)(a,2),o=r[0],i=r[1];return Object(Y.jsx)(X,{disabled:o||0===(null===t||void 0===t?void 0:t.size),onClick:Object(y.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,n();case 3:i(!1);case 4:case"end":return e.stop()}}),e)}))),variant:"contained",children:o?Object(Y.jsx)(V.a,{}):0===(null===t||void 0===t?void 0:t.size)?"NO EMPTY ACCOUNTS":"REDEEM"})},$=Object(E.a)(f.a)(U||(U=Object(k.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),ee=E.a.div(H||(H=Object(k.a)([""]))),ne=function(e){var n=e.connection,t=Object(c.useState)(),a=Object(g.a)(t,2),r=(a[0],a[1]),o=Object(c.useState)(),i=Object(g.a)(o,2),u=i[0],l=i[1],b=Object(c.useState)({open:!1,message:"",severity:void 0}),d=Object(g.a)(b,2),p=d[0],j=d[1],x=Object(R.b)(),f=Object(R.b)(),O=function(){Object(y.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&f.publicKey){e.next=2;break}return e.abrupt("return");case 2:return console.log("Finding empty token accounts"),e.next=5,B(n,f.publicKey);case 5:t=e.sent,console.log("Found  "+t.size),l(t);case 8:case"end":return e.stop()}}),e)})))()};Object(c.useEffect)(O,[f,n]),Object(c.useEffect)((function(){Object(y.a)(S.a.mark((function e(){var t;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!f||!f.publicKey){e.next=5;break}return e.next=3,n.getBalance(f.publicKey);case 3:t=e.sent,r(t/s.LAMPORTS_PER_SOL);case 5:case"end":return e.stop()}}),e)})))()}),[f,n]);var h=function(){var t=Object(y.a)(S.a.mark((function t(){var c,a,o,i,l,b,d,p;return S.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!(f&&f.publicKey&&u&&u.size>0)){t.next=29;break}return t.next=4,_(f.publicKey,u.publicKeys);case 4:c=t.sent,a=Object(v.a)(c),t.prev=6,a.s();case 8:if((o=a.n()).done){t.next=21;break}return i=o.value,t.next=12,x.sendTransaction(i,n);case 12:return l=t.sent,console.log(l),console.log("Redeem sent"),t.next=17,n.confirmTransaction(l,"confirmed");case 17:(b=t.sent).value.err?j({open:!0,message:b.value.err.toString(),severity:"warning"}):j({open:!0,message:"Successfully redeemed some SOL!",severity:"success"});case 19:t.next=8;break;case 21:t.next=26;break;case 23:t.prev=23,t.t0=t.catch(6),a.e(t.t0);case 26:return t.prev=26,a.f(),t.finish(26);case 29:t.next=35;break;case 31:t.prev=31,t.t1=t.catch(0),d=t.t1.msg||"Redeem failed!",j({open:!0,message:d,severity:"error"});case 35:if(t.prev=35,!f||!f.publicKey){t.next=41;break}return t.next=39,e.connection.getBalance(f.publicKey);case 39:p=t.sent,r(p/s.LAMPORTS_PER_SOL);case 41:return O(),t.finish(35);case 43:case"end":return t.stop()}}),t,null,[[0,31,35,43],[6,23,26,29]])})));return function(){return t.apply(this,arguments)}}();return Object(Y.jsxs)(C.a,{style:{marginTop:100},children:[Object(Y.jsx)(C.a,{maxWidth:"xs",style:{position:"relative"},children:Object(Y.jsxs)(T.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:[Object(Y.jsx)("h1",{children:"Solana Fee Redeemer"}),f.connected?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(q,{emptyAccounts:u}),Object(Y.jsx)(ee,{children:Object(Y.jsx)(Z,{emptyAccounts:u,onClick:h})})]}):Object(Y.jsx)($,{children:"Connect Wallet"}),Object(Y.jsx)("p",{style:{color:"gray"},children:"developed and maintained by solandy.sol"})]})}),Object(Y.jsx)(A.a,{open:p.open,autoHideDuration:6e3,onClose:function(){return j(Object(m.a)(Object(m.a)({},p),{},{open:!1}))},children:Object(Y.jsx)(P.a,{onClose:function(){return j(Object(m.a)(Object(m.a)({},p),{},{open:!1}))},severity:p.severity,children:p.message})})]})},te=Object(O.a)({palette:{type:"dark"}}),ce=(function(){try{new i.b.PublicKey("ToDo")}catch(e){return void console.log("Failed to construct CandyMachineId",e)}}(),"mainnet-beta"),ae="https://api.mainnet-beta.solana.com",re=new i.b.Connection(ae),oe=function(){var e=Object(c.useMemo)((function(){return Object(s.clusterApiUrl)(ce)}),[]),n=Object(c.useMemo)((function(){return[Object(u.a)(),Object(l.a)(),Object(b.a)(),Object(d.a)({network:ce}),Object(p.a)({network:ce})]}),[]);return Object(Y.jsx)(h.a,{theme:te,children:Object(Y.jsx)(j.a,{endpoint:e,children:Object(Y.jsx)(x.a,{wallets:n,autoConnect:!0,children:Object(Y.jsx)(f.b,{children:Object(Y.jsx)(ne,{connection:re,rpcHost:ae})})})})})},ie=function(e){e&&e instanceof Function&&t.e(3).then(t.bind(null,330)).then((function(n){var t=n.getCLS,c=n.getFID,a=n.getFCP,r=n.getLCP,o=n.getTTFB;t(e),c(e),a(e),r(e),o(e)}))};t(275);o.a.render(Object(Y.jsx)(a.a.StrictMode,{children:Object(Y.jsx)(oe,{})}),document.getElementById("root")),ie()}},[[276,1,2]]]);
//# sourceMappingURL=main.e39471f2.chunk.js.map