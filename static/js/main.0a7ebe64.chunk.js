(this["webpackJsonpandys-fee-redeemer"]=this["webpackJsonpandys-fee-redeemer"]||[]).push([[0],{213:function(e,t,n){},214:function(e,t){},215:function(e,t){},244:function(e,t){},245:function(e,t){},275:function(e){e.exports=JSON.parse('{"version":"0.1.0","name":"frcnt","instructions":[{"name":"initialize","accounts":[{"name":"feecntrAccount","isMut":true,"isSigner":true},{"name":"user","isMut":true,"isSigner":true},{"name":"systemProgram","isMut":false,"isSigner":false}],"args":[]},{"name":"count","accounts":[{"name":"feecntrAccount","isMut":true,"isSigner":false},{"name":"instructionSysvarAccount","isMut":false,"isSigner":false}],"args":[]}],"accounts":[{"name":"FeeCounter","type":{"kind":"struct","fields":[{"name":"closedAccounts","type":"u64"}]}}],"metadata":{"address":"FrctRs3dZ7E234V5DMJLMUvnPkjANWQoaZDRm9rebjC2"}}')},276:function(e,t,n){},277:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(30),o=n.n(a),s=(n(213),n(43)),i=n(5),u=n(327),l=n(328),b=n(329),d=n(319),p=n(320),j=n(330),f=n(324),x=n(123),m=n(195),O=n(321),h=n(99),g=n(121),v=n(57),y=n(40),k=n(96),w=n(9),S=n.n(w),A=n(316),C=n(310),P=n(325),R=n(97),T=n(323),E=n(179),K=n(127),M=.00203928;function L(e,t){return I.apply(this,arguments)}function I(){return(I=Object(v.a)(S.a.mark((function e(t,n){var r,c;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getAccountInfo(n);case 2:if((r=e.sent)&&r.data){e.next=6;break}return console.log("Could net get account info for "+n.toBase58()),e.abrupt("return",null);case 6:return c=r.data.readInt32LE(8),e.abrupt("return",{totalCloses:c,totalSolRedeemed:M*c});case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function F(e,t){return B.apply(this,arguments)}function B(){return(B=Object(v.a)(S.a.mark((function e(t,n){var r,c,a,o,s,u,l,b,d,p;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getTokenAccountsByOwner(n,{programId:K.a});case 2:r=e.sent,console.log(r),c=[],a=0,o=Object(g.a)(r.value),e.prev=7,o.s();case 9:if((s=o.n()).done){e.next=33;break}if(u=s.value,console.log(u.pubkey.toBase58()),l=!1,b=64,!u.account.data.readBigUInt64LE){e.next=20;break}d=u.account.data.readBigUInt64LE(b),console.log("amount: "+d),l=0n===d,e.next=30;break;case 20:l=!0,p=0;case 22:if(!(p<8)){e.next=29;break}if(0===u.account.data[b+p]){e.next=26;break}return l=!1,e.abrupt("break",29);case 26:p++,e.next=22;break;case 29:console.log("account empty: "+l);case 30:l&&(console.log("account empty!"),c.push(u.pubkey),a+=u.account.lamports);case 31:e.next=9;break;case 33:e.next=38;break;case 35:e.prev=35,e.t0=e.catch(7),o.e(e.t0);case 38:return e.prev=38,o.f(),e.finish(38);case 41:return e.abrupt("return",{publicKeys:c,size:c.length,amount:a/i.LAMPORTS_PER_SOL});case 42:case"end":return e.stop()}}),e,null,[[7,35,38,41]])})))).apply(this,arguments)}function U(e,t,n,r){return z.apply(this,arguments)}function z(){return(z=Object(v.a)(S.a.mark((function e(t,n,r,c){var a,o,u,l,b,d;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=n.map((function(e){return K.b.createCloseAccountInstruction(K.a,e,t,t,[])})),o=[];case 2:if(!(a.length>0)){e.next=19;break}u=new i.Transaction,l=0;case 5:if(!(l<16)){e.next=15;break}if(!(b=a.pop())){e.next=11;break}u.add(b),e.next=12;break;case 11:return e.abrupt("break",15);case 12:l++,e.next=5;break;case 15:r&&c&&(console.log("Program is here! "+c),d=c.instruction.count({accounts:{feecntrAccount:r,instructionSysvarAccount:s.d.SYSVAR_INSTRUCTIONS_PUBKEY}}),console.log("instruction created! "),u.add(d)),o.push(u),e.next=2;break;case 19:return e.abrupt("return",o);case 20:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var _,D,N,W=n(314),J=n(311),Y=n(17),Q=function(e){var t=e.emptyAccounts,n=e.totalRedemptions;return Object(Y.jsx)(W.a,{container:!0,direction:"row",justifyContent:"center",wrap:"nowrap",children:Object(Y.jsx)(W.a,{container:!0,direction:"row",wrap:"nowrap",children:t&&Object(Y.jsxs)(W.a,{container:!0,direction:"row",wrap:"nowrap",children:[Object(Y.jsxs)(W.a,{container:!0,direction:"column",children:[Object(Y.jsx)(J.a,{variant:"body2",color:"textSecondary",children:"Empty Accounts"}),Object(Y.jsx)(J.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:"".concat(null===t||void 0===t?void 0:t.size)})]}),Object(Y.jsxs)(W.a,{container:!0,direction:"column",children:[Object(Y.jsx)(J.a,{variant:"body2",color:"textSecondary",children:"You can redeem"}),Object(Y.jsx)(J.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:Z(null===t||void 0===t?void 0:t.amount)})]}),Object(Y.jsxs)(W.a,{container:!0,direction:"column",children:[Object(Y.jsx)(J.a,{variant:"body2",color:"textSecondary",children:"Total Redemmed"}),Object(Y.jsx)(J.a,{variant:"h6",color:"textPrimary",style:{fontWeight:"bold"},children:n&&Z(null===n||void 0===n?void 0:n.totalSolRedeemed)})]})]})})})},Z=function(e){return"\u25ce ".concat(e.toFixed(3))},V=n(308),H=n(315),q=Object(R.a)(V.a)(_||(_=Object(k.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),G=function(e){var t=e.onClick,n=e.emptyAccounts,c=Object(r.useState)(!1),a=Object(y.a)(c,2),o=a[0],s=a[1];return Object(Y.jsx)(q,{disabled:o||0===(null===n||void 0===n?void 0:n.size),onClick:Object(v.a)(S.a.mark((function e(){return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s(!0),e.next=3,t();case 3:s(!1);case 4:case"end":return e.stop()}}),e)}))),variant:"contained",children:o?Object(Y.jsx)(H.a,{}):0===(null===n||void 0===n?void 0:n.size)?"NO EMPTY ACCOUNTS":"REDEEM"})},X=Object(R.a)(x.a)(D||(D=Object(k.a)(["\n  width: 100%;\n  height: 60px;\n  margin-top: 10px;\n  margin-bottom: 5px;\n  background: linear-gradient(180deg, #604ae5 0%, #813eee 100%);\n  color: white;\n  font-size: 16px;\n  font-weight: bold;\n"]))),$=R.a.div(N||(N=Object(k.a)([""]))),ee=function(e){var t=e.connection,c=Object(r.useState)(),a=Object(y.a)(c,2),o=(a[0],a[1]),u=Object(r.useState)(),l=Object(y.a)(u,2),b=l[0],d=l[1],p=Object(r.useState)(),j=Object(y.a)(p,2),f=j[0],x=j[1],m=Object(r.useState)({open:!1,message:"",severity:void 0}),O=Object(y.a)(m,2),k=O[0],w=O[1],R=Object(E.b)(),K={publicKey:R.publicKey,signAllTransactions:R.signAllTransactions,signTransaction:R.signTransaction},M=new s.b(t,K,{preflightCommitment:"recent"}),I=n(275),B=new s.a(I,e.frcntrProgramId,M),z=function(){Object(v.a)(S.a.mark((function n(){var r,c;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(R&&R.publicKey){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,F(t,R.publicKey);case 4:return r=n.sent,n.next=7,L(t,e.frcntrAccount);case 7:c=n.sent,d(r),c&&x(c);case 10:case"end":return n.stop()}}),n)})))()};Object(r.useEffect)(z,[R,t]),Object(r.useEffect)((function(){Object(v.a)(S.a.mark((function e(){var n;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!R||!R.publicKey){e.next=5;break}return e.next=3,t.getBalance(R.publicKey);case 3:n=e.sent,o(n/i.LAMPORTS_PER_SOL);case 5:case"end":return e.stop()}}),e)})))()}),[R,t]);var _=function(){var n=Object(v.a)(S.a.mark((function n(){var r,c,a,s,u,l,d,p;return S.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(n.prev=0,!(R&&R.publicKey&&b&&b.size>0)){n.next=29;break}return n.next=4,U(R.publicKey,b.publicKeys,e.frcntrAccount,B);case 4:r=n.sent,c=Object(g.a)(r),n.prev=6,c.s();case 8:if((a=c.n()).done){n.next=21;break}return s=a.value,n.next=12,R.sendTransaction(s,t);case 12:return u=n.sent,console.log(u),console.log("Redeem sent"),n.next=17,t.confirmTransaction(u,"confirmed");case 17:(l=n.sent).value.err?w({open:!0,message:l.value.err.toString(),severity:"warning"}):w({open:!0,message:"Successfully redeemed some SOL!",severity:"success"});case 19:n.next=8;break;case 21:n.next=26;break;case 23:n.prev=23,n.t0=n.catch(6),c.e(n.t0);case 26:return n.prev=26,c.f(),n.finish(26);case 29:n.next=36;break;case 31:n.prev=31,n.t1=n.catch(0),d=n.t1.msg||"Redeem failed!",console.trace(),w({open:!0,message:d,severity:"error"});case 36:if(n.prev=36,!R||!R.publicKey){n.next=42;break}return n.next=40,e.connection.getBalance(R.publicKey);case 40:p=n.sent,o(p/i.LAMPORTS_PER_SOL);case 42:return z(),n.finish(36);case 44:case"end":return n.stop()}}),n,null,[[0,31,36,44],[6,23,26,29]])})));return function(){return n.apply(this,arguments)}}();return Object(Y.jsxs)(A.a,{style:{marginTop:100},children:[Object(Y.jsx)(A.a,{maxWidth:"xs",style:{position:"relative"},children:Object(Y.jsxs)(C.a,{style:{padding:24,backgroundColor:"#151A1F",borderRadius:6},children:[Object(Y.jsx)("h1",{children:"Solana Fee Redeemer"}),R.connected?Object(Y.jsxs)(Y.Fragment,{children:[Object(Y.jsx)(Q,{emptyAccounts:b,totalRedemptions:f}),Object(Y.jsx)($,{children:Object(Y.jsx)(G,{emptyAccounts:b,onClick:_})})]}):Object(Y.jsx)(X,{children:"Connect Wallet"}),Object(Y.jsx)("p",{style:{color:"gray"},children:"developed and maintained by solandy.sol"})]})}),Object(Y.jsx)(P.a,{open:k.open,autoHideDuration:6e3,onClose:function(){return w(Object(h.a)(Object(h.a)({},k),{},{open:!1}))},children:Object(Y.jsx)(T.a,{onClose:function(){return w(Object(h.a)(Object(h.a)({},k),{},{open:!1}))},severity:k.severity,children:k.message})})]})},te=Object(m.a)({palette:{type:"dark"}}),ne="mainnet-beta",re="https://api.mainnet-beta.solana.com",ce=new s.d.PublicKey("FrctRs3dZ7E234V5DMJLMUvnPkjANWQoaZDRm9rebjC2"),ae=new s.d.PublicKey("CntZ1JuK1kT2VA5QPkQiwU6aYiaPthP9oKeRQ76jYTCb"),oe=new s.d.Connection(re),se=function(){var e=Object(r.useMemo)((function(){return Object(i.clusterApiUrl)(ne)}),[]),t=Object(r.useMemo)((function(){return[Object(u.a)(),Object(l.a)(),Object(b.a)(),Object(d.a)({network:ne}),Object(p.a)({network:ne})]}),[]);return Object(Y.jsx)(O.a,{theme:te,children:Object(Y.jsx)(j.a,{endpoint:e,children:Object(Y.jsx)(f.a,{wallets:t,autoConnect:!0,children:Object(Y.jsx)(x.b,{children:Object(Y.jsx)(ee,{connection:oe,rpcHost:re,frcntrProgramId:ce,frcntrAccount:ae})})})})})},ie=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,331)).then((function(t){var n=t.getCLS,r=t.getFID,c=t.getFCP,a=t.getLCP,o=t.getTTFB;n(e),r(e),c(e),a(e),o(e)}))};n(276);o.a.render(Object(Y.jsx)(c.a.StrictMode,{children:Object(Y.jsx)(se,{})}),document.getElementById("root")),ie()}},[[277,1,2]]]);
//# sourceMappingURL=main.0a7ebe64.chunk.js.map